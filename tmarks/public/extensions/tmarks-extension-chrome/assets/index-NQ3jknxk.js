import{D as t}from"./dexie-BAhLzSXZ.js";const a=new class extends t{tags;bookmarks;metadata;tabGroups;tabGroupItems;constructor(){super("BookmarkDB"),this.version(1).stores({tags:"++id, name, color, createdAt, count",bookmarks:"++id, url, title, createdAt, remoteId, isPublic, *tags",metadata:"key, updatedAt"}),this.version(2).stores({tags:"++id, name, color, createdAt, count",bookmarks:"++id, url, title, createdAt, remoteId, isPublic, *tags",metadata:"key, updatedAt",tabGroups:"++id, title, createdAt, remoteId",tabGroupItems:"++id, groupId, title, url, position, createdAt"})}async getLastSyncTime(){const t=await this.metadata.get("lastSync");return t&&"number"==typeof t.value?t.value:0}async updateLastSyncTime(t){await this.metadata.put({key:"lastSync",value:t,updatedAt:Date.now()})}async getStats(){const[t,a,e]=await Promise.all([this.tags.count(),this.bookmarks.count(),this.getLastSyncTime()]);return{tags:t,bookmarks:a,lastSync:e}}async clearAll(){await Promise.all([this.tags.clear(),this.bookmarks.clear(),this.metadata.clear(),this.tabGroups.clear(),this.tabGroupItems.clear()])}};export{a as d};
