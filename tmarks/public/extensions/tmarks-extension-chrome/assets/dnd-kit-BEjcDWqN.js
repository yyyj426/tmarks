import{K as e,u as t,a as r,r as n,b as i,R as a,c as s,g as o,d,s as l,e as c,f as u,h as f,C as g,i as b,j as p}from"./react-vendor-1ZtHTM4k.js";function v(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function x(e,t){return e.reduce((e,r,n)=>{const i=t.get(r);return i&&(e[n]=i),e},Array(e.length))}function I(e){return null!==e&&e>=0}const h={scaleX:1,scaleY:1},m=e=>{var t;let{rects:r,activeNodeRect:n,activeIndex:i,overIndex:a,index:s}=e;const o=null!=(t=r[i])?t:n;if(!o)return null;const d=function(e,t,r){const n=e[t],i=e[t-1],a=e[t+1];if(!n||!i&&!a)return 0;if(r<t)return i?n.left-(i.left+i.width):a.left-(n.left+n.width);return a?a.left-(n.left+n.width):n.left-(i.left+i.width)}(r,s,i);if(s===i){const e=r[a];return e?{x:i<a?e.left+e.width-(o.left+o.width):e.left-o.left,y:0,...h}:null}return s>i&&s<=a?{x:-o.width-d,y:0,...h}:s<i&&s>=a?{x:o.width+d,y:0,...h}:{x:0,y:0,...h}};const w=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const a=v(t,n,r),s=t[i],o=a[i];return o&&s?{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}:null},y="Sortable",R=a.createContext({activeIndex:-1,containerId:y,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:w,disabled:{draggable:!1,droppable:!1}});function D(e){let{children:s,id:o,items:d,strategy:l=w,disabled:c=!1}=e;const{active:u,dragOverlay:f,droppableRects:g,over:b,measureDroppableContainers:p}=t(),v=r(y,o),I=Boolean(null!==f.rect),h=n.useMemo(()=>d.map(e=>"object"==typeof e&&"id"in e?e.id:e),[d]),m=null!=u,D=u?h.indexOf(u.id):-1,O=b?h.indexOf(b.id):-1,C=n.useRef(h),N=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(h,C.current),E=-1!==O&&-1===D||N,S=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(c);i(()=>{N&&m&&p(h)},[N,h,m,p]),n.useEffect(()=>{C.current=h},[h]);const T=n.useMemo(()=>({activeIndex:D,containerId:v,disabled:S,disableTransforms:E,items:h,overIndex:O,useDragOverlay:I,sortedRects:x(h,g),strategy:l}),[D,v,S.draggable,S.droppable,E,h,O,g,I,l]);return a.createElement(R.Provider,{value:T},s)}const O=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return v(r,n,i).indexOf(t)},C=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:a,newIndex:s,previousItems:o,previousContainerId:d,transition:l}=e;return!(!l||!n)&&((o===a||i!==s)&&(!!r||s!==i&&t===d))},N={duration:200,easing:"ease"},E="transform",S=g.Transition.toString({property:E,duration:0,easing:"linear"}),T={roleDescription:"sortable"};function M(e){let{animateLayoutChanges:t=C,attributes:r,disabled:a,data:s,getNewIndex:o=O,id:d,strategy:l,resizeObserverConfig:v,transition:x=N}=e;const{items:h,containerId:m,activeIndex:w,disabled:y,disableTransforms:D,sortedRects:M,overIndex:j,useDragOverlay:A,strategy:k}=n.useContext(R),L=function(e,t){var r,n;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(a,y),X=h.indexOf(d),Y=n.useMemo(()=>({sortable:{containerId:m,index:X,items:h},...s}),[m,s,X,h]),z=n.useMemo(()=>h.slice(h.indexOf(d)),[h,d]),{rect:B,node:U,isOver:F,setNodeRef:K}=c({id:d,data:Y,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:z,...v}}),{active:P,activatorEvent:q,activeNodeRect:G,attributes:H,setNodeRef:J,listeners:Q,isDragging:V,over:W,setActivatorNodeRef:Z,transform:$}=u({id:d,data:Y,attributes:{...T,...r},disabled:L.draggable}),_=f(K,J),ee=Boolean(P),te=ee&&!D&&I(w)&&I(j),re=!A&&V,ne=re&&te?$:null,ie=te?null!=ne?ne:(null!=l?l:k)({rects:M,activeNodeRect:G,activeIndex:w,overIndex:j,index:X}):null,ae=I(w)&&I(j)?o({id:d,items:h,activeIndex:w,overIndex:j}):X,se=null==P?void 0:P.id,oe=n.useRef({activeId:se,items:h,newIndex:ae,containerId:m}),de=h!==oe.current.items,le=t({active:P,containerId:m,isDragging:V,isSorting:ee,id:d,index:X,items:h,newIndex:oe.current.newIndex,previousItems:oe.current.items,previousContainerId:oe.current.containerId,transition:x,wasDragging:null!=oe.current.activeId}),ce=function(e){let{disabled:t,index:r,node:a,rect:s}=e;const[o,d]=n.useState(null),l=n.useRef(r);return i(()=>{if(!t&&r!==l.current&&a.current){const e=s.current;if(e){const t=p(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&d(r)}}r!==l.current&&(l.current=r)},[t,r,a,s]),n.useEffect(()=>{o&&d(null)},[o]),o}({disabled:!le,index:X,node:U,rect:B});return n.useEffect(()=>{ee&&oe.current.newIndex!==ae&&(oe.current.newIndex=ae),m!==oe.current.containerId&&(oe.current.containerId=m),h!==oe.current.items&&(oe.current.items=h)},[ee,ae,m,h]),n.useEffect(()=>{if(se===oe.current.activeId)return;if(null!=se&&null==oe.current.activeId)return void(oe.current.activeId=se);const e=setTimeout(()=>{oe.current.activeId=se},50);return()=>clearTimeout(e)},[se]),{active:P,activeIndex:w,attributes:H,data:Y,rect:B,index:X,newIndex:ae,items:h,isOver:F,isSorting:ee,isDragging:V,listeners:Q,node:U,overIndex:j,over:W,setNodeRef:_,setActivatorNodeRef:Z,setDroppableNodeRef:K,setDraggableNodeRef:J,transform:null!=ce?ce:ie,transition:function(){if(ce||de&&oe.current.newIndex===X)return S;if(re&&!b(q)||!x)return;if(ee||le)return g.Transition.toString({...x,property:E});return}()}}function j(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const A=[e.Down,e.Right,e.Up,e.Left],k=(t,r)=>{let{context:{active:n,collisionRect:i,droppableRects:a,droppableContainers:c,over:u,scrollableAncestors:f}}=r;if(A.includes(t.code)){if(t.preventDefault(),!n||!i)return;const r=[];c.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;const s=a.get(n.id);if(s)switch(t.code){case e.Down:i.top<s.top&&r.push(n);break;case e.Up:i.top>s.top&&r.push(n);break;case e.Left:i.left>s.left&&r.push(n);break;case e.Right:i.left<s.left&&r.push(n)}});const g=s({collisionRect:i,droppableRects:a,droppableContainers:r});let b=o(g,"id");if(b===(null==u?void 0:u.id)&&g.length>1&&(b=g[1].id),null!=b){const e=c.get(n.id),t=c.get(b),r=t?a.get(t.id):null,s=null==t?void 0:t.node.current;if(s&&r&&e&&t){const n=d(s).some((e,t)=>f[t]!==e),a=L(e,t),o=function(e,t){if(!j(e)||!j(t))return!1;if(!L(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!a?{x:0,y:0}:{x:o?i.width-r.width:0,y:o?i.height-r.height:0},u={x:r.left,y:r.top};return c.x&&c.y?u:l(u,c)}}}};function L(e,t){return!(!j(e)||!j(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}export{D as S,m as h,w as r,k as s,M as u};
